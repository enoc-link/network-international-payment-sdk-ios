default_platform(:ios)

platform :ios do
  desc "Distribute app to Firebase"
  lane :distribute_to_firebase do
    version_code = ENV['GITHUB_RUN_NUMBER']

    increment_version_number_in_plist(
      version_number: version_code,
      xcodeproj: "Examples/Simple Integration.xcodeproj" 
    )
    build_app(
      workspace: "Examples/Simple Integration.xcworkspace",
      scheme: "Simple Integration"
    )
    firebase_app_distribution(
      app: ENV["FIREBASE_APP_ID"],
      firebase_cli_token: ENV["FIREBASE_TOKEN"],
      groups: "testers"
    )
  end
end